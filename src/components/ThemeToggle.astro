---
import { Button } from "@/components/ui/button";
---

<Button id="themeToggle" variant={"outline"} size={"icon"}>
  <svg
    width="30"
    height="30"
    viewBox="0 0 16 16"
    xmlns="http://www.w3.org/2000/svg"
    class="sun rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 h-[1.2rem] w-[1.2rem]"
  >
    <g
      fill="none"
      stroke="#000000"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="1.5"
    >
      <circle cx="8" cy="8" r="3.25"></circle>
      <path
        d="m2.75 13.25l.5-.5m9.5 0l.5.5m-.5-10l.5-.5m-10 .5l-.5-.5M2.25 8h-1m13.5 0h-1M8 13.75v1m0-13.5v1"
      ></path>
    </g>
  </svg>
  <svg
    width="30"
    height="30"
    viewBox="0 0 16 16"
    xmlns="http://www.w3.org/2000/svg"
    class="moon absolute rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 h-[1.2rem] w-[1.2rem]"
  >
    <path
      fill="none"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="1.5"
      d="M1.75 8c0 3.45 2.8 6.25 6.25 6.25c3.41-.003 6.25-3 6.25-6c-1 .5-4 1.5-6-.5s-1-5-.5-6c-3 0-6 2.84-6 6.25z"
    ></path>
  </svg>
</Button>

<style>
  #themeToggle {
    border: 0;
    background: none;
  }
</style>

<script is:inline>
const theme = (() => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
        return localStorage.getItem("theme");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
    }
    return "light";
})();

if (theme === "light") {
    document.documentElement.classList.remove("dark");
} else {
    document.documentElement.classList.add("dark");
}

window.localStorage.setItem("theme", theme);

const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
};

document
    .getElementById("themeToggle")
    .addEventListener("click", handleToggleClick);
</script>
